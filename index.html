<!DOCTYPE html>
<html lang="ne">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>नेपालको राजनैतिक परिदृश्य: एक विश्लेषणात्मक इन्फोग्राफिक</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices:
        - Data: 17 वर्षमा १३ सरकार -> Goal: Inform (Instability) -> Viz: Single Big Number (HTML/Tailwind) -> Justification: Immediate impact. NO SVG.
        - Data: Historical Political Shifts -> Goal: Change (Timeline) -> Viz: Structured HTML/CSS Timeline -> Justification: Chronological understanding. NO SVG.
        - Data: Monarchy Achievements/Failures (Table from source) -> Goal: Organize -> Viz: HTML Table -> Justification: Concise summary. NO SVG.
        - Data: Literacy (40%->76%), Enrollment (76%->97%) -> Goal: Compare (Progress) -> Viz: Chart.js Bar Chart -> Justification: Visual of social progress. Library: Chart.js (Canvas). NO SVG.
        - Data: Political Instability (Govt changes) -> Goal: Inform (Challenge) -> Viz: Chart.js Bar Chart -> Justification: Visual of instability. Library: Chart.js (Canvas). NO SVG.
        - Data: Corruption/Economy (Qualitative) -> Goal: Inform -> Viz: HTML Text & Unicode Icons -> Justification: Highlight key issues. NO SVG.
        - Data: Hindu State Support (~50%) -> Goal: Inform (Public Opinion) -> Viz: Chart.js Donut Chart -> Justification: Visual of opinion segment. Library: Chart.js (Canvas). NO SVG.
        - Data: Arguments for/against (SWOT style) -> Goal: Compare/Organize -> Viz: Structured HTML/CSS Grids -> Justification: Clear comparison. NO SVG.
        - Data: Cyclical Nature of Dissatisfaction -> Goal: Organize (Process) -> Viz: HTML/CSS Diagram -> Justification: Illustrate recurring political patterns. NO SVG.
        CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .nepali-font { font-family: 'Noto Sans Nepali', sans-serif; }
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Nepali:wght@400;700&display=swap');
        .chart-container { position: relative; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (max-width: 768px) { .chart-container { height: 300px; max-height: 350px;} }
        .section-title { color: #03045E; }
        .card { background-color: #FFFFFF; border: 1px solid #ADE8F4; }
        .stat-number { color: #0077B6; }
        .timeline-item::before { content: ''; position: absolute; left: -10px; top: 0; width: 20px; height: 20px; background-color: #0077B6; border-radius: 50%; border: 3px solid #ADE8F4; z-index: 1; }
        .timeline-line { position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background-color: #ADE8F4; }
        .flow-arrow {
            display: inline-block;
            font-size: 2rem;
            color: #0077B6;
            margin: 0 0.5rem;
            line-height: 1;
        }
    </style>
</head>
<body class="bg-[#F0F8FF] text-[#212529] nepali-font">
    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold section-title">नेपालको राजनैतिक भविष्य</h1>
            <p class="text-xl text-[#0077B6] mt-2">एक विश्लेषणात्मक इन्फोग्राफिक</p>
        </header>

        <section id="intro" class="mb-12 card rounded-lg shadow-lg p-6">
            <h2 class="text-3xl font-bold section-title mb-4 text-center">परिचय: निरन्तर संक्रमण</h2>
            <p class="text-lg mb-6 text-center">नेपालको राजनैतिक इतिहास गहिरो रूपान्तरण र निरन्तर संक्रमणले भरिएको छ। शताब्दीयौँ पुरानो राजतन्त्रबाट सङ्घीय लोकतान्त्रिक गणतन्त्रसम्मको यात्रा विभिन्न जनआन्दोलन, राजनैतिक उथलपुथल र महत्वपूर्ण परिवर्तनहरूको साक्षी बनेको छ। तर, यो यात्रा सहज भने पक्कै छैन।</p>
            <div class="text-center bg-[#ADE8F4] p-6 rounded-lg">
                <p class="text-2xl text-[#03045E] mb-2">पछिल्ला १७ वर्षमा</p>
                <p class="stat-number text-6xl font-bold">१३+ सरकार</p>
                <p class="text-xl text-[#03045E] mt-2">राजनैतिक अस्थिरताको एक ज्वलन्त उदाहरण</p>
            </div>
            <p class="mt-6 text-center">यो इन्फोग्राफिकले नेपालको वर्तमान राजनैतिक बहस, राजतन्त्र र गणतन्त्रका पक्ष-विपक्ष, चुनौती र सम्भावनाहरूको तथ्याङ्क र विश्लेषणमा आधारित एक विस्तृत चित्र प्रस्तुत गर्ने प्रयास गरेको छ।</p>
            <button class="generate-summary-btn mt-4 bg-[#0077B6] hover:bg-[#005F99] text-white font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-[#E0F7FA] rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-[#0077B6]">सारांश उत्पन्न हुँदैछ...</div>
        </section>

        <section id="background" class="mb-12 card rounded-lg shadow-lg p-6">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">ऐतिहासिक परिप्रेक्ष्य</h2>
            <p class="text-lg mb-6 text-center">नेपालको आधुनिक राजनैतिक इतिहास बुझ्न प्रमुख घटनाक्रमहरू र शासन प्रणालीका विशेषताहरूलाई नियाल्नु आवश्यक छ।</p>
            
            <h3 class="text-2xl font-semibold section-title mb-4">प्रमुख राजनैतिक कोसेढुङ्गाहरू:</h3>
            <div class="relative pl-8 py-4">
                <div class="timeline-line"></div>
                <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् १७६८</h4>
                    <p>पृथ्वीनारायण शाहद्वारा नेपालको एकीकरण; शाह वंशको सुरुवात।</p>
                </div>
                <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् १८४६ - १९५१</h4>
                    <p>राणा शासन; शाह राजाहरू नाम मात्रका।</p>
                </div>
                <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् १९५१</h4>
                    <p>राणा शासनको अन्त्य; राजा त्रिभुवनद्वारा प्रजातन्त्रको प्रयास।</p>
                </div>
                <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् १९६० - १९९०</h4>
                    <p>राजा महेन्द्रद्वारा पञ्चायत प्रणाली लागू; निरङ्कुश शासन।</p>
                </div>
                <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् १९९० (२०४६ साल)</h4>
                    <p>पहिलो जनआन्दोलन; संवैधानिक राजतन्त्र र बहुदलीय प्रजातन्त्रको पुनर्स्थापना।</p>
                </div>
                 <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् २००१</h4>
                    <p>दरबार हत्याकाण्ड; राजा ज्ञानेन्द्रको उदय।</p>
                </div>
                <div class="timeline-item relative mb-8 pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् २००६ (२०६२/६३ साल)</h4>
                    <p>दोस्रो जनआन्दोलन; राजा ज्ञानेन्द्रको प्रत्यक्ष शासन अन्त्य।</p>
                </div>
                <div class="timeline-item relative pl-8">
                    <h4 class="font-bold text-xl text-[#0077B6]">सन् २००८ (२०६५ साल)</h4>
                    <p>राजतन्त्रको औपचारिक अन्त्य; नेपाल सङ्घीय लोकतान्त्रिक गणतन्त्र घोषित।</p>
                </div>
            </div>

            <h3 class="text-2xl font-semibold section-title mt-8 mb-4">राजतन्त्रकालको समीक्षा:</h3>
            <div class="overflow-x-auto">
                <table class="min-w-full bg-white">
                    <thead class="bg-[#0077B6] text-white">
                        <tr>
                            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">अवधि/राजा</th>
                            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">प्रमुख सकारात्मक पक्ष/उपलब्धिहरू</th>
                            <th class="text-left py-3 px-4 uppercase font-semibold text-sm">प्रमुख आलोचना/कमजोरीहरू</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-700">
                        <tr>
                            <td class="text-left py-3 px-4">पृथ्वीनारायण शाह</td>
                            <td class="text-left py-3 px-4">देश एकीकरण, सार्वभौम राष्ट्रको जग</td>
                            <td class="text-left py-3 px-4">निरंकुश शासनको सुरुवात</td>
                        </tr>
                        <tr class="bg-gray-50">
                            <td class="text-left py-3 px-4">राजा महेन्द्र (पञ्चायत)</td>
                            <td class="text-left py-3 px-4">मुलुकी ऐन १९६३, केही पूर्वाधार विकास (राजमार्ग, विश्वविद्यालय)</td>
                            <td class="text-left py-3 px-4">निरपेक्ष शासन, राजनैतिक स्वतन्त्रता दमन</td>
                        </tr>
                        <tr>
                            <td class="text-left py-3 px-4">संवैधानिक राजतन्त्र (वीरेन्द्र)</td>
                            <td class="text-left py-3 px-4">बहुदलीय प्रजातन्त्र, मौलिक अधिकार</td>
                            <td class="text-left py-3 px-4">दरबार हत्याकाण्ड, माओवादी विद्रोहको सुरुवात</td>
                        </tr>
                    </tbody>
                </table>
            </div>
             <p class="mt-4 text-sm italic">स्रोत: प्रदान गरिएको अनुसन्धान प्रतिवेदनको खण्ड २ र तालिका।</p>
            <button class="generate-summary-btn mt-4 bg-[#0077B6] hover:bg-[#005F99] text-white font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-[#E0F7FA] rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-[#0077B6]">सारांश उत्पन्न हुँदैछ...</div>
        </section>

        <section id="republic_journey_achievements" class="mb-12 card rounded-lg shadow-lg p-6">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">गणतन्त्रको यात्रा र उपलब्धि</h2>
            <p class="text-lg mb-6 text-center">जनआन्दोलनको बलमा स्थापित गणतन्त्रले जनताको सार्वभौमिकता, समावेशीकरण र सामाजिक न्यायका क्षेत्रमा केही महत्वपूर्ण उपलब्धिहरू हासिल गरेको छ।</p>
            <div class="grid md:grid-cols-2 gap-6 items-center">
                <div>
                    <h3 class="text-2xl font-semibold section-title mb-2">सामाजिक क्षेत्रमा प्रगति:</h3>
                    <ul class="list-disc list-inside space-y-2 mb-4 text-lg">
                        <li>जनताको सार्वभौमिकता र प्रजातान्त्रिक अधिकार सुनिश्चित।</li>
                        <li>सन् २०१५ (२०७२) मा नयाँ संविधान जारी, सङ्घीयताको कार्यान्वयन।</li>
                        <li>महिला, दलित, जनजाति जस्ता सीमान्तकृत समुदायको अधिकार र प्रतिनिधित्वमा वृद्धि।</li>
                    </ul>
                     <p class="mt-4 text-sm italic">स्रोत: प्रदान गरिएको अनुसन्धान प्रतिवेदनको खण्ड ३।</p>
                </div>
                <div class="chart-container h-[300px] md:h-[350px]">
                    <canvas id="socialProgressChart"></canvas>
                </div>
            </div>
            <p class="mt-4 text-sm text-center italic">माथिको चार्टले सन् १९९० देखि हालसम्म साक्षरता दर र विद्यालय भर्ना दरमा भएको वृद्धिलाई देखाउँछ।</p>
            <button class="generate-summary-btn mt-4 bg-[#0077B6] hover:bg-[#005F99] text-white font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-[#E0F7FA] rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-[#0077B6]">सारांश उत्पन्न हुँदैछ...</div>
        </section>

        <section id="current_challenges" class="mb-12 card rounded-lg shadow-lg p-6">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">गणतन्त्रका वर्तमान चुनौतीहरू</h2>
            <p class="text-lg mb-6 text-center">गणतन्त्र स्थापना भएको डेढ दशक बितिसक्दा पनि देशले विभिन्न गम्भीर चुनौतीहरूको सामना गरिरहेको छ, जसले जनआकांक्षामाथि तुषारापात गरेको छ।</p>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-2xl font-semibold section-title mb-4">राजनैतिक अस्थिरता:</h3>
                    <div class="chart-container h-[300px] md:h-[350px] mb-4">
                        <canvas id="politicalInstabilityChart"></canvas>
                    </div>
                    <p class="text-sm text-center italic">पछिल्ला १७ वर्षमा १३ भन्दा बढी सरकार परिवर्तनले नीतिगत निरन्तरता र विकासमा बाधा पुगेको छ। स्रोत: प्रतिवेदन खण्ड १, ४।</p>
                </div>
                <div>
                    <h3 class="text-2xl font-semibold section-title mb-4">प्रमुख समस्याहरू:</h3>
                    <div class="space-y-4">
                        <div class="flex items-start p-4 bg-red-50 rounded-lg">
                            <span class="text-3xl mr-4">⚠️</span> 
                            <div>
                                <h4 class="font-bold text-xl text-red-700">व्यापक भ्रष्टाचार</h4>
                                <p>राज्यका विभिन्न तहमा भ्रष्टाचारले जरा गाडेको छ (जस्तै: सुन काण्ड, भुटानी शरणार्थी काण्ड)। दण्डहीनताले यसलाई थप बढावा दिएको छ।</p>
                            </div>
                        </div>
                        <div class="flex items-start p-4 bg-yellow-50 rounded-lg">
                             <span class="text-3xl mr-4">📉</span>
                            <div>
                                <h4 class="font-bold text-xl text-yellow-700">आर्थिक मन्दी र बेरोजगारी</h4>
                                <p>सुस्त आर्थिक वृद्धि, बढ्दो बेरोजगारी र युवाहरूको विदेश पलायन (ब्रेन ड्रेन) प्रमुख चिन्ताका विषय हुन्।</p>
                            </div>
                        </div>
                        <div class="flex items-start p-4 bg-blue-50 rounded-lg">
                            <span class="text-3xl mr-4">🏛️</span>
                            <div>
                                <h4 class="font-bold text-xl text-blue-700">कमजोर राज्य संस्थाहरू</h4>
                                <p>न्यायपालिका र कर्मचारीतन्त्रमा राजनैतिक हस्तक्षेप र जनविश्वासमा कमी देखिएको छ।</p>
                            </div>
                        </div>
                    </div>
                     <p class="mt-4 text-sm italic">स्रोत: प्रदान गरिएको अनुसन्धान प्रतिवेदनको खण्ड ४।</p>
                </div>
            </div>
            <button class="generate-summary-btn mt-4 bg-[#0077B6] hover:bg-[#005F99] text-white font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-[#E0F7FA] rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-[#0077B6]">सारांश उत्पन्न हुँदैछ...</div>
        </section>

        <section id="monarchy_resurgence_debate" class="mb-12 card rounded-lg shadow-lg p-6">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">राजतन्त्रको पुनरुत्थानको बहस</h2>
            <p class="text-lg mb-6 text-center">गणतान्त्रिक प्रणालीका कमजोरीहरूप्रतिको जनअसन्तुष्टिका कारण राजतन्त्र पुनर्स्थापना र हिन्दू राष्ट्रको माग पुनः सतहमा आएको छ।</p>
            <div class="grid md:grid-cols-2 gap-8 items-center">
                <div>
                    <h3 class="text-2xl font-semibold section-title mb-4">राजतन्त्रका पक्षमा तर्कहरू:</h3>
                    <ul class="list-disc list-inside space-y-2 mb-4 text-lg">
                        <li>स्थिरता र राष्ट्रिय एकताको प्रतीक।</li>
                        <li>भ्रष्टाचार नियन्त्रण र सुशासनको आशा।</li>
                        <li>राष्ट्रिय र हिन्दू पहिचानको संरक्षण।</li>
                        <li>पूर्व राजा ज्ञानेन्द्रको बढ्दो सक्रियता र समर्थन।</li>
                    </ul>
                     <p class="mt-4 text-sm italic">स्रोत: प्रदान गरिएको अनुसन्धान प्रतिवेदनको खण्ड २, ५।</p>
                </div>
                <div class="chart-container h-[300px] md:h-[350px]">
                     <canvas id="hinduStateSupportChart"></canvas>
                </div>
            </div>
            <p class="mt-4 text-sm text-center italic">एक सर्वेक्षण अनुसार करिब आधा जनसंख्या नेपाललाई पुनः हिन्दू राष्ट्र बनाउने पक्षमा छ। स्रोत: प्रतिवेदन खण्ड २।</p>
            <button class="generate-summary-btn mt-4 bg-[#0077B6] hover:bg-[#005F99] text-white font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-[#E0F7FA] rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-[#0077B6]">सारांश उत्पन्न हुँदैछ...</div>
        </section>

        <section id="cycle_of_dissatisfaction" class="mb-12 card rounded-lg shadow-lg p-6">
            <h2 class="text-3xl font-bold section-title mb-6 text-center">असन्तुष्टिको चक्र</h2>
            <p class="text-lg mb-6 text-center">नेपालको राजनैतिक इतिहासले देखाउँछ कि कुनै पनि प्रणालीले जनताको आकांक्षा पूरा गर्न नसक्दा असन्तुष्टि बढ्छ र प्रणाली परिवर्तनको माग उठ्छ। यो चक्र हाल पनि जारी देखिन्छ।</p>
            <div class="flex flex-col md:flex-row justify-around items-center text-center space-y-4 md:space-y-0 md:space-x-4 p-4 bg-gray-50 rounded-lg">
                <div class="p-3 rounded bg-white shadow">
                    <p class="font-semibold text-lg">शासन प्रणाली</p>
                    <p class="text-sm">(e.g. पञ्चायत, गणतन्त्र)</p>
                </div>
                <div class="flow-arrow">➔</div>
                <div class="p-3 rounded bg-white shadow">
                    <p class="font-semibold text-lg">अपेक्षा पूरा नहुनु</p>
                    <p class="text-sm">(अस्थिरता, भ्रष्टाचार, आर्थिक कठिनाइ)</p>
                </div>
                <div class="flow-arrow">➔</div>
                <div class="p-3 rounded bg-white shadow">
                    <p class="font-semibold text-lg">जनअसन्तुष्टि</p>
                    <p class="text-sm">(विरोध, आन्दोलन)</p>
                </div>
                <div class="flow-arrow">➔</div>
                 <div class="p-3 rounded bg-white shadow">
                    <p class="font-semibold text-lg">प्रणाली परिवर्तनको माग</p>
                    <p class="text-sm">(e.g. राजतन्त्रको माग)</p>
                </div>
                 <div class="flow-arrow hidden md:block">↻</div>
            </div>
            <p class="mt-6 text-center">यो चक्र तोड्न सुशासन, आर्थिक विकास र जनताप्रतिको वास्तविक जवाफदेहिता आवश्यक छ।</p>
            <p class="mt-4 text-sm italic">अवधारणा स्रोत: प्रदान गरिएको अनुसन्धान प्रतिवेदनको खण्ड १ को विश्लेषण।</p>
            <button class="generate-summary-btn mt-4 bg-[#0077B6] hover:bg-[#005F99] text-white font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-[#E0F7FA] rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-[#0077B6]">सारांश उत्पन्न हुँदैछ...</div>
        </section>
        
        <section id="conclusion_forward_path" class="card rounded-lg shadow-lg p-6 bg-[#0077B6] text-white">
            <h2 class="text-3xl font-bold mb-4 text-center">निष्कर्ष र अगाडिको बाटो</h2>
            <p class="text-lg mb-4">नेपालमा राजतन्त्र र गणतन्त्रको बहस केवल दुई प्रणालीको छनोट मात्र होइन, यो राष्ट्रिय पहिचान, आर्थिक कल्याण र सुशासनको गहिरो आकाङ्क्षासँग जोडिएको छ। गणतन्त्रले जनताको अपेक्षा पूर्ण रूपमा पूरा गर्न नसक्दा राजतन्त्र समर्थक भावना बढेको छ।</p>
            <p class="text-lg mb-4">अन्ततः, नेपालको राजनैतिक भविष्य शासन प्रणालीको प्रभावकारितामा निर्भर गर्दछ। गणतान्त्रिक प्रणालीले आफ्ना सैद्धान्तिक लाभहरूलाई जनताको जीवनमा मूर्त सुधारमा परिणत गर्न आवश्यक छ। भ्रष्टाचार नियन्त्रण, आर्थिक विकास, र समावेशी सुशासन नै जनविश्वास जित्ने र राजनैतिक स्थिरता हासिल गर्ने कुञ्जी हुन्।</p>
            <p class="text-lg font-semibold">जबसम्म शासन र विकासका अन्तर्निहित समस्याहरूलाई सम्बोधन गरिँदैन, नेपालले प्रणाली जे भए पनि, प्रणालीगत सुधारका लागि यी चक्रीय मागहरू अनुभव गरिरहन सक्छ।</p>
             <p class="mt-4 text-sm italic">स्रोत: प्रदान गरिएको अनुसन्धान प्रतिवेदनको निष्कर्ष।</p>
            <button class="generate-summary-btn mt-4 bg-white hover:bg-gray-100 text-[#0077B6] font-bold py-2 px-4 rounded-lg shadow-md">✨ सारांश उत्पन्न गर्नुहोस्</button>
            <div class="summary-output mt-4 p-4 bg-blue-50 rounded-lg text-[#03045E] hidden"></div>
            <div class="loading-indicator hidden mt-4 text-center text-white">सारांश उत्पन्न हुँदैछ...</div>
        </section>

    </div>

    <script>
        const nepaliLabelWrap = (label) => {
            if (typeof label !== 'string') return label;
            const words = label.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + ' ' + word).length > 16 && currentLine.length > 0) {
                    lines.push(currentLine);
                    currentLine = word;
                } else {
                    currentLine = currentLine ? currentLine + ' ' + word : word;
                }
            }
            if (currentLine) {
                lines.push(currentLine);
            }
            return lines.length > 1 ? lines : label;
        };

        const tooltipTitleCallback = (tooltipItems) => {
            const item = tooltipItems[0];
            let label = item.chart.data.labels[item.dataIndex];
            if (Array.isArray(label)) {
              return label.join(' ');
            } else {
              return label;
            }
        };

        // Chart 1: Social Progress
        const socialProgressCtx = document.getElementById('socialProgressChart').getContext('2d');
        new Chart(socialProgressCtx, {
            type: 'bar',
            data: {
                labels: [nepaliLabelWrap('साक्षरता दर (%)'), nepaliLabelWrap('विद्यालय भर्ना दर (%)')],
                datasets: [{
                    label: 'सन् १९९०',
                    data: [40, 76],
                    backgroundColor: '#ADE8F4',
                    borderColor: '#00B4D8',
                    borderWidth: 1
                }, {
                    label: 'वर्तमान (अनुमानित)',
                    data: [76, 97],
                    backgroundColor: '#0077B6',
                    borderColor: '#03045E',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, max: 100, ticks: { color: '#03045E' } },
                    x: { ticks: { color: '#03045E', callback: function(value, index, values) {
                            const label = this.getLabelForValue(value);
                            return Array.isArray(label) ? label : label.split(' ');
                        }  } }
                },
                plugins: {
                    legend: { labels: { color: '#03045E' } },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                }
            }
        });

        // Chart 2: Political Instability
        const politicalInstabilityCtx = document.getElementById('politicalInstabilityChart').getContext('2d');
        new Chart(politicalInstabilityCtx, {
            type: 'bar',
            data: {
                labels: [nepaliLabelWrap('पछिल्ला १७ वर्षमा सरकार परिवर्तन')],
                datasets: [{
                    label: 'सरकारको संख्या',
                    data: [13],
                    backgroundColor: ['#0077B6'],
                    borderColor: ['#03045E'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, max: 15, ticks: { color: '#03045E' } },
                    x: { ticks: { color: '#03045E' } }
                },
                plugins: {
                    legend: { display: false },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                }
            }
        });
        
        // Chart 3: Hindu State Support
        const hinduStateSupportCtx = document.getElementById('hinduStateSupportChart').getContext('2d');
        new Chart(hinduStateSupportCtx, {
            type: 'doughnut',
            data: {
                labels: [nepaliLabelWrap('हिन्दू राष्ट्रको पक्षमा'), nepaliLabelWrap('अन्य/विपक्षमा')],
                datasets: [{
                    label: 'जनमत सर्वेक्षण',
                    data: [50, 50],
                    backgroundColor: ['#0077B6', '#ADE8F4'],
                    borderColor: ['#03045E', '#00B4D8'],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { position: 'top', labels: { color: '#03045E' } },
                    tooltip: { callbacks: { title: tooltipTitleCallback } }
                }
            }
        });

        // Function to generate summary using Gemini API
        async function generateSummary(sectionId) {
            const section = document.getElementById(sectionId);
            const summaryOutput = section.querySelector('.summary-output');
            const loadingIndicator = section.querySelector('.loading-indicator');
            const summaryButton = section.querySelector('.generate-summary-btn');

            if (!summaryOutput || !loadingIndicator || !summaryButton) {
                console.error('Missing summary elements for section:', sectionId);
                return;
            }

            summaryOutput.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');
            summaryButton.disabled = true; // Disable button during generation

            let sectionContent = '';
            section.querySelectorAll('h2, h3, p, li, th, td').forEach(element => {
                // Exclude content from the summary output div, loading indicator, and summary button itself
                if (!summaryOutput.contains(element) && !loadingIndicator.contains(element) && !summaryButton.contains(element)) {
                    sectionContent += element.innerText + '\n';
                }
            });

            const prompt = `नेपालको राजनैतिक परिदृश्य सम्बन्धी यो खण्डको मुख्य बुँदाहरूलाई नेपालीमा संक्षेपमा प्रस्तुत गर्नुहोस् (१०० शब्द भन्दा कम):\n\n${sectionContent.trim()}`;

            try {
                const payload = {
                    contents: [{ role: "user", parts: [{ text: prompt }] }],
                    generationConfig: {
                        temperature: 0.7,
                        maxOutputTokens: 200
                    }
                };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    summaryOutput.innerText = text;
                    summaryOutput.classList.remove('hidden');
                } else {
                    summaryOutput.innerText = 'सारांश उत्पन्न गर्न सकिएन।';
                    summaryOutput.classList.remove('hidden');
                    console.error('Gemini API response structure unexpected:', result);
                }
            } catch (error) {
                summaryOutput.innerText = 'सारांश उत्पन्न गर्दा त्रुटि भयो।';
                summaryOutput.classList.remove('hidden');
                console.error('Error calling Gemini API:', error);
            } finally {
                loadingIndicator.classList.add('hidden');
                summaryButton.disabled = false;
            }
        }

        // Add event listeners to all summary buttons
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.generate-summary-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const sectionId = button.closest('section').id;
                    generateSummary(sectionId);
                });
            });
        });
    </script>
</body>
</html>
